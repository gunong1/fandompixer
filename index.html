<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>팬덤 픽셀 (Fandom Pixel) - 10,000,000 PIXELS</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav id="auth-header">
        <div id="user-info">
            <span id="user-nickname"></span>
            <button id="history-btn" class="glass-btn small-btn">📜 내역</button>
            <a href="/auth/logout" class="glass-btn small-btn">로그아웃</a>
        </div>
        <a id="login-btn" href="/auth/google">
            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI0ZGQzEwNyIgZD0iTTQzLjYxMSAyMC4wODNIMjVWNDJoMzcuMjA1YzAuMDc2LjA1OC40My4zLjA2Ny41LTIuNDI4IDguMjkxIDUuMjA2IDguMjkxIDUuMjA2IDhWNDE5SDQzLjYxMXoiLz48cGF0aCBmaWxsPSIjRkYzRDMzIiBkPSJNMzIuMTg1IDMwLjk1Yy0zLjQxMi0yLjU5NS01Ljg0LTEuNjU5LTUuODQtMTIuNDc2aDI2Ljk0N0M1MC45OTMgMjIuNjk5IDQ3LjczNyAzMy41IDM3Ljk3IDQxLjM0IDM0LjAyIDQ0LjUgMjcuMTIgNDYgMTkuODQgNDZjLTkuMDY4IDAtMTYuNzI3LTQuNzEyLTIwLjkxMy0xMS45NzN6Ii8+PHBhdGggZmlsbD0iIzRCAFQwNSIgZD0iTTE5Ljg0IDIyYzIuNjg2IDAgNS4wODYuOTc1IDYuOTc2IDIuNjQxbDMuNDEyLTIuNTk1YzMuODY4IDIuNjM3IDYuMTYxIDcuMjU3IDYuMTYxIDEyLjQzIDAgMy4zOC0uODEzIDUuNzcyLTIuMDI5IDguMjkxQzMwLjIzNSAyNi45MDcgMjUuMzQ2IDMxIDE5Ljg0IDMxIDguNzM0IDMxIDAgMjIuNjk5IDAgMTIuNDc2IDAgNi43MDcgMy4wNTYgMS40NDIgOC4wNzEuMDAzTDEyLjA1NyA5LjU1MUM5LjQ4IDEwLjY5NiA3LjU4IDEzLjM1IDcuNTggMTYuMzR6Ii8+PHBhdGggZmlsbD0iIzRCAFQwNSIgZD0iTTEyLjA1NyA5LjU1MUMxNi4zNyAyLjAyIDE5Ljg0IDAgMjcuMTIgMGw1LjgyIDIuMjU4QzI3Ljk5NCAzLjg4MiAyNS42NzYgOC41MDcgMjEuMDkgMTEuOTdMMTIuMDU3IDkuNTUxeiIvPjwvc3ZnPg=="
                alt="G" width="20" style="background:white; border-radius:50%; padding:2px;">
            <span>Google 로그인</span>
        </a>
    </nav>

    <div id="container">
        <h1>FANDOM PIXEL</h1>
        <div class="subtitle">10,000,000 PIXELS GLOBAL STAGE</div>
    </div>

    <!-- NEW: Fandom Ranking Board -->
    <div id="ranking-board" class="panel">
        <h3>
            <span>🏆 Fandom Ranking</span>
        </h3>
        <ul id="ranking-list">
            <li>Loading ranking...</li>
        </ul>
    </div>

    <div id="side-panel" class="panel">
        <h2 id="area-id">Area #7721</h2>
        <div id="pixel-info">
            <span id="status-tag">구독
                가능</span>
            <div id="selected-pixel-count"></div>
            <div class="pixel-owner-info">
                <span>소유자</span> <span id="owner-nickname">없음</span>
            </div>
            <div class="pixel-idol-info">
                <span>아이돌</span> <span id="idol-group">없음</span>
            </div>
        </div>

        <div id="purchase-form">
            <hr>
            <p>이 구역을 구독하여 당신의 아티스트를 위한 영토로 선포하세요.</p>
            <div class="form-group">
                <label for="nickname-input">닉네임</label>
                <input type="text" id="nickname-input" placeholder="로그인이 필요합니다" disabled>
            </div>
            <div class="form-group">
                <label for="idol-select">그룹</label>
                <select id="idol-select">
                    <!-- Global/Legends -->
                    <option value="BTS">BTS</option>
                    <option value="Blackpink">Blackpink</option>
                    <option value="TWICE">TWICE</option>
                    <option value="EXO">EXO</option>
                    <option value="Seventeen">Seventeen</option>
                    <option value="NCT">NCT</option>
                    <option value="Red Velvet">Red Velvet</option>
                    <option value="Mamamoo">Mamamoo</option>
                    <option value="GOT7">GOT7</option>
                    <option value="Monsta X">Monsta X</option>
                    <option value="Stray Kids">Stray Kids</option>
                    <option value="ITZY">ITZY</option>
                    <option value="TXT">TXT</option>
                    <option value="ATEEZ">ATEEZ</option>
                    <option value="(G)I-DLE">(G)I-DLE</option>
                    <option value="aespa">aespa</option>
                    <option value="ENHYPEN">ENHYPEN</option>
                    <option value="IVE">IVE</option>
                    <option value="NewJeans">NewJeans</option>
                    <option value="LE SSERAFIM">LE SSERAFIM</option>
                    <option value="NMIXX">NMIXX</option>
                    <option value="Kep1er">Kep1er</option>
                    <option value="STAYC">STAYC</option>
                    <option value="TREASURE">TREASURE</option>
                    <option value="The Boyz">The Boyz</option>
                    <option value="ASTRO">ASTRO</option>
                    <option value="OH MY GIRL">OH MY GIRL</option>
                    <option value="WJSN">WJSN</option>
                    <option value="Dreamcatcher">Dreamcatcher</option>
                    <option value="LOONA">LOONA</option>
                    <option value="CRAVITY">CRAVITY</option>
                    <option value="ONEUS">ONEUS</option>
                    <option value="P1Harmony">P1Harmony</option>

                    <!-- 2nd Gen / Legends -->
                    <option value="BIGBANG">BIGBANG</option>
                    <option value="Girls' Generation">Girls' Generation</option>
                    <option value="SHINee">SHINee</option>
                    <option value="Super Junior">Super Junior</option>
                    <option value="2PM">2PM</option>
                    <option value="TVXQ!">TVXQ!</option>
                    <option value="2NE1">2NE1</option>
                    <option value="Apink">Apink</option>
                    <option value="SISTAR">SISTAR</option>
                    <option value="Miss A">Miss A</option>
                    <option value="Girl's Day">Girl's Day</option>
                    <option value="AOA">AOA</option>
                    <option value="EXID">EXID</option>
                    <option value="BTOB">BTOB</option>
                    <option value="HIGHLIGHT">HIGHLIGHT</option>
                    <option value="INFINITE">INFINITE</option>
                    <option value="VIXX">VIXX</option>
                    <option value="B1A4">B1A4</option>
                    <option value="Block B">Block B</option>
                    <option value="WINNER">WINNER</option>
                    <option value="iKON">iKON</option>
                    <option value="KARA">KARA</option>
                    <option value="T-ara">T-ara</option>
                    <option value="4Minute">4Minute</option>
                    <option value="Wonder Girls">Wonder Girls</option>
                    <option value="f(x)">f(x)</option>

                    <!-- Produce / Project Groups -->
                    <option value="IOI">I.O.I</option>
                    <option value="Wanna One">Wanna One</option>
                    <option value="IZ*ONE">IZ*ONE</option>
                    <option value="X1">X1</option>
                    <option value="ZEROBASEONE">ZEROBASEONE</option>

                    <!-- Rookies / 4th-5th Gen -->
                    <option value="RIIZE">RIIZE</option>
                    <option value="TWS">TWS</option>
                    <option value="BOYNEXTDOOR">BOYNEXTDOOR</option>
                    <option value="BABYMONSTER">BABYMONSTER</option>
                    <option value="ILLIT">ILLIT</option>
                    <option value="KISS OF LIFE">KISS OF LIFE</option>
                    <option value="tripleS">tripleS</option>
                    <option value="PLAVE">PLAVE</option>
                    <option value="QWER">QWER</option>
                    <option value="LUCY">LUCY</option>
                    <option value="DAY6">DAY6</option>
                </select>
            </div>
            <div class="payment-info">
                <span>결제 금액:</span> <span>₩ 1,000</span>
            </div>
            <button class="subscribe-btn" id="subscribe-button">구역 구독하기</button>
        </div>
    </div>

    <div id="status-bar">
        <div class="tag" id="help-btn">
            [F1] 도움말
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal">
        <div class="panel">
            <div class="help-modal-header">
                <h2>사용 방법</h2>
                <span id="close-help">&times;</span>
            </div>
            <ul>
                <li class="help-item"><span>캔버스 확대/축소</span> <span>마우스 휠</span></li>
                <li class="help-item"><span>캔버스 이동</span> <span>Ctrl + 드래그</span></li>
                <li class="help-item"><span>화면 중앙 정렬</span> <span>스페이스바</span></li>
                <li class="help-item"><span>픽셀 선택</span> <span>마우스 클릭</span></li>
                <li class="help-item"><span>다중 픽셀 선택</span> <span>마우스 드래그</span></li>
                <li class="help-item help-item-footer">
                    <span>닫기</span> <span>ESC</span>
                </li>
            </ul>
        </div>
    </div>

    <div id="minimap-container">
        <div id="minimap-view"></div>
    </div>

    <canvas id="pixelCanvas"></canvas>

    <!-- History Modal -->
    <div id="history-modal" class="modal-overlay" style="display: none;">
        <div class="glass-panel"
            style="width: 500px; max-width: 90%; max-height: 80vh; display: flex; flex-direction: column;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">📜 내 활동 내역</h2>
                <button id="close-history-btn"
                    style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div style="flex: 1; overflow-y: auto;">
                <table id="history-table" style="width: 100%; border-collapse: collapse; font-size: 14px;">
                    <thead>
                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.2); text-align: left;">
                            <th style="padding: 10px;">구매일</th>
                            <th style="padding: 10px;">그룹</th>
                            <th style="padding: 10px;">좌표</th>
                            <th style="padding: 10px;">만료일</th>
                        </tr>
                    </thead>
                    <tbody id="history-list">
                        <!-- History Items will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.portone.io/v2/browser-sdk.js"></script>
    <script src="main.js?v=auth_fix"></script>
    <!-- Mobile Controls -->
    <div id="mobile-controls">
        <button id="mobile-mode-btn">
            이동
        </button>
    </div>
</body>

</html>